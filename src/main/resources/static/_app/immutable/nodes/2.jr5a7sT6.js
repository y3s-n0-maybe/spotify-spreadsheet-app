import{f as b,a as g}from"../chunks/DtP4zE-2.js";import{i as x}from"../chunks/CgSOTSia.js";import{h as v,W as A,X as w,Y as E,Z as M,B as T,_ as j,v as N,O as _,f as L,G as u,y as G,M as h,N as p,$ as I,a0 as H}from"../chunks/BOERJucq.js";import{b as O,l as R,e as B}from"../chunks/gPO-l3xF.js";const C=Symbol("is custom element"),D=Symbol("is html");function P(e){if(v){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var r=e.value;y(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var s=e.checked;y(e,"checked",null),e.checked=s}}};e.__on_r=t,A(t),O()}}function y(e,a,t,r){var s=U(e);v&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=t)&&(a==="loading"&&(e[w]=t),e.removeAttribute(a))}function U(e){return e.__attributes??(e.__attributes={[C]:e.nodeName.includes("-"),[D]:e.namespaceURI===E})}function V(e,a,t=a){var r=M();R(e,"input",s=>{var l=s?e.defaultValue:e.value;if(l=n(e)?c(l):l,t(l),r&&l!==(l=a())){var o=e.selectionStart,i=e.selectionEnd;e.value=l??"",i!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(i,e.value.length))}}),(v&&e.defaultValue!==e.value||T(a)==null&&e.value)&&t(n(e)?c(e.value):e.value),j(()=>{var s=a();n(e)&&s===c(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function n(e){var a=e.type;return a==="number"||a==="range"}function c(e){return e===""?null:+e}var Y=b('<head><title>Spotify Spreadsheet App</title></head> <h1 class="svelte-j791li">Spotify Spreadsheet Doohickey</h1> <h2 class="svelte-j791li">Please paste the link to your Spotify playlist here</h2> <div class="wrapper svelte-j791li"><input type="text" placeholder="https://open.spotify.com/playlist/xxxxxxxx" id="playlist-link" class="svelte-j791li"/></div> <div class="wrapper svelte-j791li"><button id="load-playlist" class="svelte-j791li">Go</button></div>',1);function Z(e,a){N(a,!1);let t="",r=H("");async function s(){console.log("fetching playlist..."),t=await(await fetch("/api/token")).text(),console.log("Token recieved:",t);const k=new Headers({Authorization:"Bearer "+t}),S=await(await fetch("https://api.spotify.com/v1/playlists/"+u(r).split("/").pop(),{headers:k,method:"GET"})).json();console.log(S)}x();var l=Y(),o=_(L(l),6),i=h(o);P(i),p(o);var f=_(o,2),m=h(f);p(f),V(i,()=>u(r),d=>I(r,d)),B("click",m,s),g(e,l),G()}export{Z as component};
